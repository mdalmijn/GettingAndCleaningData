Getting and Cleaning Data Course Project
=======================================

# Script
Script to produce a tidy dataset from the UCI HAR Dataset. The script performs the following high level steps:

1. Merge the training and the test sets to create one data set.
2. Extract only the measurements on the mean and standard deviation for each measurement.
3. Use descriptive activity names to name the acitivities in the data set.
4. Appropriately label the data set with descriptive variable names. 
5. From the data set in step 4, create a second, independent tidy data set with the average of each variable for each activity and each subject.


## Raw data description
The following raw data is processed in the script:
* features.txt
* activity_labels.txt
* subject_train.txt
* subject_test.txt
* X-train.txt
* X-test.txt
* y_train.txt
* y_test.txt

Please ensure all of these files are in the working directory and filenames match when running the script.

## Dependencies
The script requires the package reshape and dplyr to be installed.

## How the script works

### 1. Merge the training and the test sets to create one data set.

### Reading in necessary test and training data
All raw data is read in using read.table.

### Label columns
The columns of the dataframes are labelled with descriptive names using the colnames function. The data that is present in features.txt is used to label the columns of X_train.txt and X_test.txt.

### Creating the test and training data sets
The training data set is generated by performing cbind on:
* subject_train.txt
* y_train.txt
* X_train.txt

The test data set is generated by performing cbind on:
* subject_test.txt
* y_test.txt
* X_test.txt

### Merging the test and training datasets
The test and training datasets are then merged by using rbind.

### 2. Extract only the measurements on the mean and standard deviation for each measurement.

### Creating a vector that contains all column names of the merged data.
By using colnames on the merged dataset you can create a vector that contains all colnames.

### Creating a logical vector to subset data
By using regular expressions, create a logical vector that only returns TRUE when a column contains:
* SubjectId
* ActivityId
* mean()
* std()

It returns false for all columns that do not contain these strings.

### Subset the data using the logical vector
Subset the merged data set with the logical vector so only the columns of interest are returned.

### 3. Use descriptive activity names to name the acitivities in the data set.

### Merge the subsetted data set with the activity_labels.txt
Merge activity_labels.txt to the subsetted data set.

### Remove unnecessary activityId and rearring the data
Using select from the dplyr package the activityId column is removed, as there now is an additional column with the same information called activityType which contains more descriptive names.

The activityType column is moved to the same location as where the activityId column by subsetting columns with a rearranged vector.

### 4. Appropriately label the data set with descriptive variable names. 

### Cleaning up variable names with regular expressions
The subsetted data set is cleaned up by using regular expressions. First the names of the current dataset are saved in a new vector by using colnames.

The following characters are then removed from the vector by using regular expressions:
* -, ( and )
* t when it is the first character
* f when it is the first character

The following strings are changed by using regular expressions:
* std is changed to Std
* mean is changed to Mean

This results in a data set with descriptive variable names. The resulting vector is used to rename the subsetted data set by using colnames.

### 5. From the data set in step 4, create a second, independent tidy data set with the average of each variable for each activity and each subject.
The subsetted data is melted by subject and type of activity by using the melt function of the reshape package.

The mean is computed for all levels of Subject and Activity with the cast function.

### The data is written to a file 
Writ.table is used to write the data to UCIHAR.txt.

